# History

In 1970, Edgar F.Codd developed the theory about relational databases. You might remember learning about relational databases a while back. This is a database that contains a series of tables that can be connected to form relationships. At the time IBM was using a relational database management system called System R. Well, IBM computer scientists were trying to figure out a way to manipulate and retrieve data from IBM System R. Their first query language was hard to use. So they quickly moved on to the next version, SQL. In 1979, after extensive testing SQL, now just spelled S-Q-L, was released publicly. By 1986, SQL had become the standard language for relational database communication, and it still is. This is another reason why data analysts choose SQL. It's a well-known standard within the community.

# How a junior data analyst uses SQL

In this reading, you will learn more about how to decide when to use SQL, or Structured Query Language. As a data analyst, you will be tasked with handling a lot of data, and SQL is one of the tools that can help make your work a lot easier. SQL is the primary way data analysts extract data from databases. As a data analyst, you will work with databases all the time, which is why SQL is such a key skill. Let’s follow along as a junior data analyst uses SQL to solve a business task.

## The business task and context

The junior data analyst in this example works for a social media company. A new business model was implemented on February 15, 2020 and the company wants to understand how their user-growth compares to the previous year. Specifically, the data analyst was asked to find out how many users have joined since February 15, 2020.

![An image of a person holding a laptop containing different data and an image of a multi-colored outline of 3 people](https://d3c33hcgiwev3.cloudfront.net/imageAssetProxy.v1/IJOWRlghSYqTlkZYITmK_g_c746d43c945e428b961aa296713a0c93_Screen-Shot-2021-01-25-at-1.45.29-PM.png?expiry=1750896000000&hmac=j3xwLp0JxnDpi6-hZ-ivy0pMiR0aIDgC7dBJvixRu94)

## Spreadsheets functions and formulas or SQL queries?

Before they can address this question, this data analyst needs to choose what tool to use. First, they have to think about where the data lives. If it is stored in a database, then SQL is the best tool for the job. But if it is stored in a spreadsheet, then they will have to perform their analysis in that spreadsheet. In that scenario, they could create a pivot table of the data and then apply specific formulas and filters to their data until they were given the number of users that joined after February 15th. It isn’t a really complicated process, but it would involve a lot of steps.

In this case, the data is stored in a database, so they will have to work with SQL. And this data analyst knows they could get the same results with a single SQL query:

```sql
SELECT
	COUNT(DISTINCT user_id) AS count_of_unique_users 
FROM 
	table 
WHERE 
	join_date >= '2020-02-15'
```

Spreadsheets and SQL both have their advantages and disadvantages:


| **Features of Spreadsheets**                         | **Features of SQL Databases **                                     |
| ------------------------------------------------------ | -------------------------------------------------------------------- |
| Smaller data sets                                    | Larger datasets                                                    |
| Enter data manually                                  | Access tables across a database                                    |
| Create graphs and visualizations in the same program | Prepare data for further analysis in another software              |
| Built-in spell check and other useful functions      | Fast and powerful functionality                                    |
| Best when working solo on a project                  | Great for collaborative work and tracking queries run by all users |

# SQL dialects and their uses

In this reading, you will learn more about SQL dialects and some of their different uses. As a quick refresher, **Structured Query Language**, or SQL, is a language used to talk to databases. Learning SQL can be a lot like learning a new language—including the fact that languages usually have different dialects within them. Some database products have their own variant of SQL, and these different varieties of SQL dialects are what help you communicate with each database product.

These dialects will be different from company to company and might change over time if the company moves to another database system. So, a lot of analysts start with Standard SQL and then adjust the dialect they use based on what database they are working with. Standard SQL works with a majority of databases and requires a small number of syntax changes to adapt to other dialects.

As a junior data analyst, it is important to know that there are slight differences between dialects. But by mastering Standard SQL, which is the dialect you will be working with in this program, you will be prepared to use SQL in any database.

## More information

You may not need to know every SQL dialect, but it is useful to know that these different dialects exist. If you are interested in learning more about SQL dialects and when they are used, you can check out these resources for more information:

* LearnSQL’s blog, [**What Is a SQL Dialect, and Which One Should You Learn?**](https://learnsql.com/blog/what-sql-dialect-to-learn/ "This link takes you to a LearnSQL blog about SQL dialects.")
* Software Testing Help’s article, [**Differences Between SQL Vs MySQL vs SQL Server**](https://www.softwaretestinghelp.com/sql-vs-mysql-vs-sql-server/ "This link takes you to an article describing the differences between SQL, MySQL, and SQL Server.")
* Datacamp’s blog, [**SQL Server, PostgreSQL, MySQL... what's the difference? Where do I start?**](https://www.datacamp.com/community/blog/sql-differences "This link takes you to Datacamps's blog about different SQL dialects.")**
  **Note that there is an error in this blog article. The comparison table incorrectly states that SQlite uses subqueries instead of window functions. Refer to the [**SQLite Window Functions**](https://sqlite.org/windowfunctions.html "SQLite Window Functions")** **documentation for proper clarification.
* SQL Tutorial’s tutorial, [**What is SQL**](https://www.sqltutorial.org/what-is-sql/ "This link takes you to SQL Tutorial's introduction to SQL.")

# Widely used SQL Queries

### 1. SELECT + FROM
Used to **pull specific data** from a table.

```sql
SELECT column1, column2
FROM dataset.table_name;
```

### 2. INSERT INTO
- Adds new data into a table.

```sql
INSERT INTO table_name (column1, column2)
VALUES ('value1', 'value2');
```

### 3. UPDATE

- Modifies existing records in a table.
- Requires specifying:
- The table
- The column to change
- The condition for which row(s) to update

```sql
UPDATE table_name
SET column_to_change = 'new_value'
WHERE condition;
```

### 4. CREATE TABLE IF NOT EXISTS

- Creates a new table if it doesn’t already exist.
- Useful for storing reusable query results.

```sql
CREATE TABLE IF NOT EXISTS new_table_name (
  column1 datatype,
  column2 datatype
);
```
*Note:* Query results are only stored in memory temporarily unless saved manually or inserted into a table.

### 5. DROP TABLE IF EXISTS

- Deletes tables that you created to keep the database clean.

```sql
DROP TABLE IF EXISTS table_name;
```

### 6. Removing Duplicates with `DISTINCT`

- Use `DISTINCT` in a `SELECT` query to return only unique values.

```sql
SELECT DISTINCT customer_id
FROM customer_data.customer_address;
```

### 7. SQL String Functions for Data Cleaning

- String variables are text values often made up of letters, numbers, or both.
- Inconsistent string formats can create problems during analysis.

**7.1. LENGTH() or LEN()**

- Returns the number of characters in a string.
- Useful to validate format consistency, e.g., country codes should be 2 characters.

```sql
SELECT LENGTH(country) AS letters_in_country
FROM customer_data.customer_address;

-- To filter rows with country names longer than 2 characters:
SELECT country
FROM customer_data.customer_address
WHERE LENGTH(country) > 2;
```

**7.2. SUBSTRING()**

- Extracts part of a string.
- Useful for standardizing inputs like country codes (e.g., convert “USA” to “US”).

```sql
-- Select customer IDs where the first 2 letters of country = “US”
SELECT DISTINCT customer_id
FROM customer_data.customer_address
WHERE SUBSTRING(country, 1, 2) = 'US';
```

### 7.3. TRIM()

- Removes leading and trailing spaces from a string.
- Useful for catching hidden formatting issues.

```sql
-- Get customers in Ohio (OH), accounting for accidental spaces:
SELECT DISTINCT customer_id
FROM customer_data.customer_address
WHERE TRIM(state) = 'OH';
```

### 7.4. CAST()

- When importing external data into SQL tables, **data types may be incorrect** (e.g.numbers imported as strings).
- This causes issues in **sorting, filtering, and analysis**.
- `CAST` lets you **convert data from one type to another** so it's usable in your queries.

```sql
SELECT purchase_price
FROM customer_data.customer_purchase
ORDER BY purchase_price DESC;
-- Sorting `purchase_price` in descending order doesn't work since purchase_price is stored as a string, so results are sorted alphabetically, not numerically.
```

Solution
```sql
-- Use CAST to Convert to FLOAT64
SELECT CAST(purchase_price AS FLOAT64)
FROM customer_data.customer_purchase
ORDER BY CAST(purchase_price AS FLOAT64) DESC;
```

### 7.5. CONCAT – Combine Multiple Strings

- Create unique keys by combining fields (e.g. product code + color).
- Useful for distinguishing between similar products.

```sql
-- Count couch purchases by color to track color preferences and manage inventory
SELECT CONCAT(product_code, product_color) AS product_key
FROM customer_data.customer_purchase
WHERE product = 'couch';
```

### 7.6. COALESCE – Handle Null Values Gracefully

- Returns the first non-null value in a list of columns.
- Useful when some fields are optional or have missing data.

```sql
--Use product name if available, else use product code to improve readability and ensure complete data for reporting
SELECT COALESCE(product, product_code) AS product_info
FROM customer_data.customer_purchase;
```

